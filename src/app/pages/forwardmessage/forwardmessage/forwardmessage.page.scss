/* =========================================
   Chats / Search / Selection (tokenized)
   ========================================= */

/* App surfaces */
ion-toolbar {
  --background: var(--ion-toolbar-background, var(--ion-background-color));
  --color: var(--ion-toolbar-color, var(--ion-text-color));
  color: var(--color);
  box-shadow: none;
  border-bottom: 1px solid var(--ion-border-color);
}
ion-content {
  --background: var(--ion-background-color);
}

/* Title & brand */
ion-title { color: var(--ion-color-primary); }

/* Header spacing */
.telldemm { padding-top: 20px; /* or env(safe-area-inset-top) */ }

/* Icons / images inside buttons */
ion-button img { width: 24px; height: 24px; }

/* Layout wrappers */
.main-header { display: flex; flex-direction: row; justify-content: center; }
.container   { width: 100%; display: flex; flex-direction: column; align-items: center; }

/* Search input (custom) */
#searchInput {
  width: 92%;
  height: 46px;
  border-radius: 10px;
  font-size: 16px;
  background-color: var(--ion-item-background);
  background-image: url(https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/search-24.png);
  background-position: 10px 10px;
  background-repeat: no-repeat;
  background-size: 20px 20px;
  padding: 8px 20px 8px 40px;
  color: var(--ion-text-color);
  border: 1px solid var(--ion-border-color);
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
}
#searchInput::placeholder {
  color: color-mix(in srgb, var(--ion-text-color) 45%, transparent);
}

/* Filters row */
.main-filters { width: 100%; display: flex; justify-content: center; }
.filters {
  width: 92%;
  display: flex;
  gap: 10px;
  color: var(--ion-text-color);
}
.filter-link {
  background: color-mix(in srgb, var(--ion-text-color) 18%, var(--ion-item-background));
  color: color-mix(in srgb, var(--ion-text-color) 60%, transparent);
  padding: 8px 15px;
  border-radius: 15px;
  font-family: "Montserrat", sans-serif;
  font-weight: 600;
  font-size: 14px;
  margin: 15px 0 10px;
}
.active-filter {
  background-color: color-mix(in srgb, var(--ion-color-primary) 18%, var(--ion-item-background)) !important;
  color: var(--ion-color-primary) !important;
}

/* Lists & items */
ion-list { background: var(--ion-card-background); }
ion-item {
  --padding-start: 10px;
  --inner-padding-end: 10px;
  --background: var(--ion-item-background);
  --color: var(--ion-text-color);
  --inner-border-width: 0;
  --border-style: none;
  --border-width: 0;
}

/* Row content */
.chat-message {
  color: var(--ion-text-color);
  display: flex;
  align-items: center;
  font-size: 17px;
  font-family: "Montserrat", sans-serif;
  font-weight: 500;
}
.chat-meta {
  display: flex;
  flex-direction: column;
  align-items: center;
  .time {
    font-size: 12px;
    color: color-mix(in srgb, var(--ion-text-color) 45%, transparent);
    margin: 0;
  }
}
.message-row { display: flex; align-items: center; }
.chat-text { margin: 0; }

/* Badges & icons */
ion-badge {
  font-size: 10px;
  border-radius: 10px;
  height: 15px;
  color: var(--ion-color-primary-contrast);
  background: var(--ion-color-primary);
}
.icon-image {
  background: var(--ion-color-primary);
  color: var(--ion-color-primary-contrast);
  display: flex; align-items: center; justify-content: center;
  border-radius: 10px;
  width: 60px; height: 60px;
  box-shadow: 0 6px 16px color-mix(in srgb, var(--ion-color-primary) 20%, transparent);
}
ion-icon { font-size: 26px; color: var(--ion-text-color); }

/* Ticks / status marks */
.tick-icon,
.tick-seen {
  width: 14px;
  margin-right: 4px;
  vertical-align: middle;
}
.tick-seen--lg { width: 22px; }

/* Unread counter (generic) */
.unread-badge {
  font-size: 12px;
  min-width: 20px; height: 20px; text-align: center;
  padding: 4px 6px; border-radius: 12px;
  background: var(--ion-color-primary);
  color: var(--ion-color-primary-contrast);
}

/* Fab */
ion-fab { margin-right: 15px; }

/* Footer nav links */
.footer-link {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-decoration: none; color: inherit; padding: 8px; min-width: 70px;
  ion-label { font-size: 12px; text-align: center; }
  img { width: 24px; height: 24px; }
}
.footer-buttons { display: flex; justify-content: space-around; align-items: center; width: 100%; }

/* Check icon in rows */
.check-icon {
  width: 16px; height: 16px; margin-right: 6px;
  color: color-mix(in srgb, var(--ion-text-color) 55%, transparent);
  vertical-align: middle; font-size: 16px;
}

/* Gallery scroller */
.gallery-scroll {
  display: flex; flex-direction: row; overflow-x: auto;
  padding: 10px 0; gap: 10px;
  background: color-mix(in srgb, var(--ion-text-color) 6%, var(--ion-item-background));
  position: relative; z-index: 1;
}
.thumb { width: 70px; height: 70px; object-fit: cover; border-radius: 8px; }

/* QR / Scanner */
.scanner-active { background: transparent !important; }
.qr-scan-button ion-icon { width: 22px; height: 22px; margin-right: 8px; }
.scanned-result-card {
  margin-top: 16px;
  border: 1px solid var(--ion-border-color);
  background: var(--ion-card-background);
  border-radius: 12px;
}

/* Modal blur */
.custom-blur-modal::part(backdrop) {
  backdrop-filter: blur(10px);
  background: rgba(0,0,0,.3);
}
.custom-blur-modal::part(content) {
  --background: transparent;
  display: flex; align-items: center; justify-content: center;
}
.popup-container { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; }
.popup-image { width: 250px; height: 250px; box-shadow: 0 0 15px rgba(0,0,0,.2); }
.icon-row {
  display: flex; justify-content: space-around; width: 100%;
  padding: 10px 0; background: var(--ion-item-background);
}
.popup-icon { font-size: 28px; color: var(--ion-color-primary); }

/* Page centering for delegates */
.ion-delegate-host.ion-page { display: flex; justify-content: center; }

/* Typographic odds & ends */
.person    { font-size: 24px; }
.Forward   { margin-left: 10px; font-size: 20px; }
.Frequently{ font-size: 15px; margin: 0; padding-left: 10px; }

/* Selection states */
ion-item.selected {
  background: color-mix(in srgb, var(--ion-color-primary) 12%, var(--ion-item-background));
}
.avatar-container { position: relative; }
.check-overlay {
  position: absolute;
  font-size: 23px;
  background: var(--ion-card-background);
  border-radius: 50%;
  top: 23px; left: 24px;
  color: var(--ion-color-primary);
  border: 1px solid var(--ion-border-color);
}

/* Selected footer summary */
.selected-footer {
  background: var(--ion-background-color);
  border-top: 1px solid var(--ion-border-color);

  .selected-names {
    padding: 8px;
    font-size: 14px;
    color: var(--ion-text-color);
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  }
}

/* Themed accents */
.multi-send { color: var(--ion-color-primary); }

/* Accessibility focus */
:where(#searchInput, .filter-link, ion-item, .icon-image, .popup-icon):focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
  border-radius: 12px;
}

/* Dark-mode polish */
@media (prefers-color-scheme: dark) {
  .gallery-scroll { background: color-mix(in srgb, var(--ion-text-color) 9%, var(--ion-item-background)); }
}