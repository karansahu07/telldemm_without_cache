<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Create MegaTell</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="dismiss()">
        <ion-icon name="close-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <ion-card>
    <ion-card-header>
      <ion-card-title>MegaTell Information</ion-card-title>
      <ion-card-subtitle>Fill in the details to create your MegaTell</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <form (ngSubmit)="submit()">

        <!-- MegaTell Pic Section -->
        <div class="profile-image-container">
          <div class="profile-image-wrapper">
            <img
              *ngIf="previewUrl; else placeholder"
              [src]="previewUrl"
              class="profile-image"
              alt="MegaTell Pic"
            />
            <ng-template #placeholder>
              <div class="profile-placeholder">
                <ion-icon name="chatbubble-outline" class="placeholder-icon"></ion-icon>
              </div>
            </ng-template>

            <!-- Upload Button -->
            <label class="camera-button">
              <ion-icon name="camera" class="camera-icon"></ion-icon>
              <input type="file" accept="image/*" (change)="onFileSelected($event)" hidden />
            </label>
          </div>
          <p class="upload-text">Upload MegaTell Pic</p>
        </div>

        <!-- MegaTell Name -->
        <ion-item>
          <ion-label position="stacked">MegaTell Name *</ion-label>
          <ion-input
            placeholder="Enter your MegaTell name"
            [(ngModel)]="channel_name"
            name="channel_name"
            required
          ></ion-input>
        </ion-item>

        <!-- Description -->
        <ion-item>
          <ion-label position="stacked">Description *</ion-label>
          <ion-textarea
            placeholder="Describe what this MegaTell is about"
            [(ngModel)]="description"
            name="description"
            rows="4"
          ></ion-textarea>
        </ion-item>

        <!-- Visibility -->
        <ion-item>
          <ion-label position="stacked">Visibility*</ion-label>
          <ion-segment [(ngModel)]="is_public" name="is_public">
            <ion-segment-button value="1">
              <ion-label>Public</ion-label>
            </ion-segment-button>
            <ion-segment-button value="0">
              <ion-label>Private</ion-label>
            </ion-segment-button>
          </ion-segment>
        </ion-item>

        <!-- Max Tellers -->
        <ion-item>
          <ion-label position="stacked">Max Tellers</ion-label>
          <ion-input
            type="number"
            placeholder="Enter maximum Tellers"
            [(ngModel)]="max_members"
            name="max_members"
          ></ion-input>
        </ion-item>

        <!-- Circle Type -->
        <ion-item>
          <ion-label position="stacked">Circle Type *</ion-label>
          <ion-select
            placeholder="Select circle type"
            [(ngModel)]="category_id"
            name="category_id"
          >
            <ion-select-option *ngFor="let c of categories" [value]="c.id">
              {{ c.category_name }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- DemmRegion -->
        <ion-item>
          <ion-label position="stacked">DemmRegion *</ion-label>
          <ion-select
            placeholder="Select DemmRegion"
            [(ngModel)]="region_id"
            name="region_id"
          >
            <ion-select-option *ngFor="let r of regions" [value]="r.region_id">
              {{ r.region_name }} ({{ r.country_code }})
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Buttons -->
        <div class="button-container">
          <ion-button fill="clear" color="medium" (click)="dismiss()">
            Cancel
          </ion-button>
          <ion-button type="submit" color="primary">
            Create MegaTell
          </ion-button>
        </div>

      </form>
    </ion-card-content>
  </ion-card>

</ion-content>
