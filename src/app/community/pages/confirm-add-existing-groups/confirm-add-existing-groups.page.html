<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Add {{ groups.length }} {{ groups.length === 1 ? 'group' : 'groups' }} to "{{ communityName || 'Community' }}"?</ion-title>
  </ion-toolbar>
</ion-header>

<!-- fixed footer button -->
<ion-footer translucent>
  <ion-toolbar>
    <ion-button expand="block" color="primary" (click)="addToCommunity()" [disabled]="adding">
      <ion-icon slot="start" name="add-circle-outline"></ion-icon>
      <span *ngIf="!adding">Add to community</span>
      <span *ngIf="adding">Adding...</span>
    </ion-button>
  </ion-toolbar>
</ion-footer>

<!-- scrollable content in between -->
<ion-content [fullscreen]="true" class="ion-padding">

  <div class="intro" style="text-align:center; margin:18px 0;">
    <p style="font-size:16px; color:#666;">
      People in these groups will be added to the community and the announcement group, and can join other community groups. You can review group permissions:
    </p>
  </div>

  <ion-list>
    <ng-container *ngFor="let g of groups">
      <ion-item lines="none" class="group-block">
        <ion-avatar slot="start" style="width:56px; height:56px;">
          <img [src]="g.dp || 'assets/images/user.jfif'"/>
        </ion-avatar>

        <ion-label>
          <h2 style="margin:0; font-weight:700;">{{ g.name }}</h2>
          <p style="margin:4px 0 0 0; color:#888;">You</p>
        </ion-label>
      </ion-item>

      <!-- permissions rows -->
      <ion-item lines="full">
        <ion-label>
          <h3 style="margin:0;">Group visibility</h3>
          <p style="margin:4px 0 0 0; color:#888;">{{ g.visibility || 'Visible' }}</p>
        </ion-label>
        <ion-icon slot="end" name="eye-outline"></ion-icon>
      </ion-item>

      <ion-item lines="full">
        <ion-label>
          <h3 style="margin:0;">Group permissions</h3>
          <p style="margin:4px 0 0 0; color:#888;">{{ g.permissionsSummary || 'Members can send messages' }}</p>
        </ion-label>
        <ion-icon slot="end" name="settings-outline"></ion-icon>
      </ion-item>

      <ion-item lines="none">
        <!-- small spacer -->
      </ion-item>
    </ng-container>
  </ion-list>

</ion-content>
